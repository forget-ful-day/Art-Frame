<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админка - Мой магазин</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --primary:#6366f1;--primary-dark:#4f46e5;--secondary:#f59e0b;
            --accent:#ec4899;--dark:#1f2937;--darker:#111827;--light:#f8fafc;
            --gray:#6b7280;--success:#10b981;--error:#ef4444;
            --gradient:linear-gradient(135deg,#6366f1,#8b5cf6,#ec4899);
            --shadow:0 10px 25px -5px rgba(0,0,0,0.1);--shadow-lg:0 25px 50px -12px rgba(0,0,0,0.25);
            --border-radius:16px;--transition:all 0.3s ease
        }
        body{font-family:system-ui,-apple-system,sans-serif;background:#f1f5f9;min-height:100vh}
        .admin-security{background:#fef2f2;border:1px solid #fecaca;border-radius:8px;padding:1rem;margin:1rem;max-width:1200px;margin:1rem auto}
        .admin-security h3{color:#dc2626;margin-bottom:0.5rem}
        .header{background:white;box-shadow:var(--shadow);padding:1rem 0}
        .nav{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:0 2rem}
        .logo{font-size:1.5rem;font-weight:700;background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
        .nav-menu{list-style:none;display:flex;gap:2rem;align-items:center}
        .nav-link{color:var(--dark);text-decoration:none;font-weight:500;padding:0.5rem 1rem;border-radius:8px;transition:var(--transition)}
        .nav-link:hover{color:var(--primary)}
        .admin-container{max-width:1200px;margin:2rem auto;padding:0 2rem;display:grid;grid-template-columns:250px 1fr;gap:2rem}
        .admin-sidebar{background:white;border-radius:var(--border-radius);box-shadow:var(--shadow);padding:1.5rem}
        .tab-btn{width:100%;padding:1rem;background:none;border:none;text-align:left;cursor:pointer;transition:var(--transition);border-radius:8px;margin-bottom:0.5rem}
        .tab-btn:hover,.tab-btn.active{background:var(--gradient);color:white}
        .admin-content{background:white;border-radius:var(--border-radius);box-shadow:var(--shadow);padding:2rem}
        .tab-content{display:none}
        .tab-content.active{display:block}
        .form-group{margin-bottom:1.5rem}
        .form-group label{display:block;margin-bottom:0.5rem;font-weight:600;color:var(--darker)}
        .form-group input,.form-group textarea{width:100%;padding:0.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:var(--transition)}
        .form-group input:focus,.form-group textarea:focus{outline:none;border-color:var(--primary)}
        .btn-primary{background:var(--gradient);color:white;padding:0.75rem 1.5rem;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:var(--transition)}
        .btn-primary:hover{transform:translateY(-2px)}
        .admin-product-item{background:#f8fafc;padding:1rem;margin-bottom:1rem;border-radius:8px;border-left:4px solid var(--primary)}
        .product-actions{margin-top:1rem}
        .btn-edit{background:#f59e0b;color:white;padding:0.5rem 1rem;border:none;border-radius:6px;cursor:pointer;margin-right:0.5rem}
        .btn-danger{background:#ef4444;color:white;padding:0.5rem 1rem;border:none;border-radius:6px;cursor:pointer}
        .notification{position:fixed;top:20px;right:20px;background:#10b981;color:white;padding:1rem 1.5rem;border-radius:8px;box-shadow:var(--shadow-lg);z-index:10000}
    </style>
</head>
<body>
    <div class="admin-security">
        <h3>⚠️ Защита админки</h3>
        <p>Пароль: <strong>admin123</strong> | Секретный доступ: 6 кликов на логотип</p>
    </div>

    <header class="header">
        <nav class="nav">
            <div class="logo">Админка Магазина</div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">На сайт</a></li>
                <li><a href="#" id="logoutBtn" class="nav-link">Выйти</a></li>
            </ul>
        </nav>
    </header>

    <div class="admin-container">
        <div class="admin-sidebar">
            <button class="tab-btn active" data-tab="about">О нас</button>
            <button class="tab-btn" data-tab="products">Товары</button>
            <button class="tab-btn" data-tab="contacts">Контакты</button>
            <button class="tab-btn" data-tab="add-product">Добавить товар</button>
        </div>

        <div class="admin-content">
            <div id="about-tab" class="tab-content active">
                <h2>Редактирование "О нас"</h2>
                <form id="aboutForm">
                    <div class="form-group">
                        <label for="aboutTitle">Заголовок:</label>
                        <input type="text" id="aboutTitle" name="title">
                    </div>
                    <div class="form-group">
                        <label for="aboutContent">Содержание:</label>
                        <textarea id="aboutContent" name="content" rows="6"></textarea>
                    </div>
                    <button type="submit" class="btn-primary">Сохранить</button>
                </form>
            </div>

            <div id="products-tab" class="tab-content">
                <h2>Управление товарами</h2>
                <div id="productsList"></div>
            </div>

            <div id="contacts-tab" class="tab-content">
                <h2>Редактирование контактов</h2>
                <form id="contactsForm">
                    <div class="form-group">
                        <label for="contactEmail">Email:</label>
                        <input type="email" id="contactEmail" name="email">
                    </div>
                    <div class="form-group">
                        <label for="contactPhone">Телефон:</label>
                        <input type="tel" id="contactPhone" name="phone">
                    </div>
                    <div class="form-group">
                        <label for="contactTelegram">Telegram:</label>
                        <input type="text" id="contactTelegram" name="telegram">
                    </div>
                    <div class="form-group">
                        <label for="contactVk">ВКонтакте:</label>
                        <input type="text" id="contactVk" name="vk">
                    </div>
                    <button type="submit" class="btn-primary">Сохранить контакты</button>
                </form>
            </div>

            <div id="add-product-tab" class="tab-content">
                <h2>Добавить товар</h2>
                <form id="addProductForm">
                    <div class="form-group">
                        <label for="productName">Название:</label>
                        <input type="text" id="productName" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="productPrice">Цена (₽):</label>
                        <input type="number" id="productPrice" name="price" required>
                    </div>
                    <div class="form-group">
                        <label for="productImage">URL изображения:</label>
                        <input type="url" id="productImage" name="image" required>
                    </div>
                    <div class="form-group">
                        <label for="productDescription">Описание:</label>
                        <textarea id="productDescription" name="description" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="productBuyUrl">URL для покупки:</label>
                        <input type="url" id="productBuyUrl" name="buyUrl" required>
                    </div>
                    <button type="submit" class="btn-primary">Добавить товар</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Проверка авторизации
        if(!sessionStorage.getItem('adminAuthenticated')) {
            window.location.href = 'admin-login.html';
        }

        const storeData = JSON.parse(localStorage.getItem('storeData')) || {
            about: {title:"О нас",content:"Я занимаюсь созданием качественных товаров уже более 5 лет."},
            contacts: {email:"example@mail.ru",phone:"+7 (999) 999-99-99",telegram:"@mytelegram",vk:"vk.com/mypage"},
            products: [],
            adminPassword: "admin123"
        };

        // Инициализация админки
        document.addEventListener('DOMContentLoaded', function() {
            loadForms();
            setupEventListeners();
        });

        function loadForms() {
            // Загрузка данных в формы
            if(storeData.about) {
                document.getElementById('aboutTitle').value = storeData.about.title || '';
                document.getElementById('aboutContent').value = storeData.about.content || '';
            }
            if(storeData.contacts) {
                document.getElementById('contactEmail').value = storeData.contacts.email || '';
                document.getElementById('contactPhone').value = storeData.contacts.phone || '';
                document.getElementById('contactTelegram').value = storeData.contacts.telegram || '';
                document.getElementById('contactVk').value = storeData.contacts.vk || '';
            }
            loadProductsList();
        }

        function setupEventListeners() {
            // Вкладки
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    document.getElementById(this.dataset.tab + '-tab').classList.add('active');
                });
            });

            // Формы
            document.getElementById('aboutForm').addEventListener('submit', saveAbout);
            document.getElementById('contactsForm').addEventListener('submit', saveContacts);
            document.getElementById('addProductForm').addEventListener('submit', addProduct);
            document.getElementById('logoutBtn').addEventListener('click', logout);
        }

        function saveAbout(e) {
            e.preventDefault();
            storeData.about = {
                title: document.getElementById('aboutTitle').value,
                content: document.getElementById('aboutContent').value
            };
            saveData();
            showNotification('Информация "О нас" сохранена!');
        }

        function saveContacts(e) {
            e.preventDefault();
            storeData.contacts = {
                email: document.getElementById('contactEmail').value,
                phone: document.getElementById('contactPhone').value,
                telegram: document.getElementById('contactTelegram').value,
                vk: document.getElementById('contactVk').value
            };
            saveData();
            showNotification('Контакты сохранены!');
        }

        function addProduct(e) {
            e.preventDefault();
            const form = e.target;
            const newProduct = {
                id: Date.now(),
                name: form.name.value,
                price: parseInt(form.price.value),
                image: form.image.value,
                description: form.description.value,
                buyUrl: form.buyUrl.value
            };
            storeData.products.push(newProduct);
            saveData();
            form.reset();
            loadProductsList();
            showNotification('Товар добавлен!');
        }

        function loadProductsList() {
            const container = document.getElementById('productsList');
            container.innerHTML = storeData.products.map(product => `
                <div class="admin-product-item">
                    <h4>${product.name} - ${formatPrice(product.price)}₽</h4>
                    <p>${product.description}</p>
                    <div class="product-actions">
                        <button class="btn-edit" onclick="editProduct(${product.id})">Редактировать</button>
                        <button class="btn-danger" onclick="deleteProduct(${product.id})">Удалить</button>
                    </div>
                </div>
            `).join('');
        }

        function editProduct(id) {
            const product = storeData.products.find(p => p.id === id);
            if(product) {
                document.getElementById('productName').value = product.name;
                document.getElementById('productPrice').value = product.price;
                document.getElementById('productImage').value = product.image;
                document.getElementById('productDescription').value = product.description;
                document.getElementById('productBuyUrl').value = product.buyUrl;
                deleteProduct(id, false);
                document.querySelector('[data-tab="add-product"]').click();
            }
        }

        function deleteProduct(id, confirm = true) {
            if(!confirm || confirm('Удалить товар?')) {
                storeData.products = storeData.products.filter(p => p.id !== id);
                saveData();
                loadProductsList();
                showNotification('Товар удален!');
            }
        }

        function formatPrice(price) {
            return new Intl.NumberFormat('ru-RU').format(price);
        }

        function saveData() {
            localStorage.setItem('storeData', JSON.stringify(storeData));
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

        function logout() {
            sessionStorage.removeItem('adminAuthenticated');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>